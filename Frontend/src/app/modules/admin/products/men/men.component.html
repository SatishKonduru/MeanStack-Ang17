<div class="d-flex col-md-12">
 
  <mat-card class="w-25">
    <mat-card-content>
      Total Categories of Men Products: @if(menProducts$){
      <span class="text-primary font-weight-bold">{{
        (menProducts$ | async)?.length || 0
      }}</span>
       }
    </mat-card-content>
  </mat-card>
    <button mat-mini-fab  class="mx-4 my-2"color="warn" matTooltip="ADD New Product" (click)="drawer.toggle()"><mat-icon>add</mat-icon></button>
 
</div>
<hr />
<div class="my-3 bg-light p-1">
  <app-product-card
    [products]="
      menProducts$
        | async
        | slice
          : paginate.pageIndex * paginate.pageSize
          : (paginate.pageIndex + 1) * paginate.pageSize
    "
  >
  </app-product-card>

  <mat-paginator
    #paginate
    [length]="(menProducts$ | async)?.length"
    [pageSize]="10"
    [pageSizeOptions]="[10, 20, 50]"
    showFirstLastButtons
    class="bg-light p-3"
  ></mat-paginator>
</div>


<!-- Right sidenav for adding New Product -->

  <mat-drawer #drawer class="add-product-sidenav" mode="over" position="end">
    
    <div class="container">
      <h6>Add Product</h6> 
      <form [formGroup]="productForm">
        <!-- First Row -->
        <div class="row">

          <div class="col-md-3 mb-1 mr-2">
              <mat-form-field appearance="outline">
                <mat-label>Name: </mat-label>
                <input matInput formControlName="name" >
              </mat-form-field>
          </div>

          <div class="col-md-8 mb-1 mr-2">
            <mat-form-field appearance="outline" style="width: 100%">
              <mat-label>Description: </mat-label>
              <textarea matInput formControlName="description" rows="1" > </textarea>
            </mat-form-field>
          </div>

        </div>
        <!-- Second Row -->
        <div class="row">

          <div class="col-md-3 mb-1 mr-2">
              <mat-form-field appearance="outline">
                <mat-label>Price: </mat-label>
                <input matInput formControlName="price" >
              </mat-form-field>
          </div>

          <div class="col-md-3 mb-1 mr-2">
            <mat-form-field appearance="outline">
              <mat-label>Category: </mat-label>
              <mat-select formControlName="category"> 
                @for(category of (categories$ | async); track $index){
                 
                  <mat-option [value]="category.id">{{category.name}} </mat-option>
                }
            </mat-select>
            </mat-form-field>
          </div>

        <div class="col-md-3 mb-1 mr-2">
         
          <mat-form-field appearance="outline">
            <mat-label>In Stock: </mat-label>
            <input matInput formControlName="countInStock" >
          </mat-form-field>
        </div>
          <div class="col-md-3 mb-1 mr-2">
            <mat-form-field appearance="outline">
              <mat-label>Style: </mat-label>
              <mat-select formControlName="style"> 
                <mat-option value="Casual">Casual</mat-option>
                <mat-option value="Formal">Formal</mat-option>
                <mat-option value="Sports">Sports</mat-option>
              </mat-select>
            </mat-form-field>

        </div>
      
        </div>

        <!-- Third Row -->
        <div class="row">
          <div class="col-md-3 mb-1 mr-2">
            <mat-form-field appearance="outline">
              <mat-label>Size: </mat-label>
              <mat-select formControlName="size"> 
                <mat-option value="Small">Small</mat-option>
                <mat-option value="Medium">Medium</mat-option>
                <mat-option value="Large">Large</mat-option>
                <mat-option value="Extra Large">Extra Large</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-md-3 mb-1 mr-2">
            <mat-form-field appearance="outline">
              <mat-label>color: </mat-label>
              <mat-select formControlName="color"> 
                <mat-option value="Black">Black</mat-option>
                <mat-option value="White">White</mat-option>
                <mat-option value="Red">Red</mat-option>
                <mat-option value="Green">Green</mat-option>
                <mat-option value="Blue">Blue</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="col-md-3 mb-1 mr-2">
            <mat-form-field appearance="outline">
              <mat-label>Season: </mat-label>
              <mat-select formControlName="season"> 
                <mat-option value="Summer">Summer</mat-option>
                <mat-option value="Winter">Winter</mat-option>
                <mat-option value="Spring">Spring</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          
          <div class="col-md-3 mb-1 mr-2">
            <mat-form-field appearance="outline">
              <mat-label>Brand: </mat-label>
              <mat-select formControlName="brand"> 
                <mat-option value="Louis Philippe">Louis Philippe</mat-option>
                <mat-option value="Allen Solly">Allen Solly</mat-option>
                <mat-option value="Puma">Puma</mat-option>
                <mat-option value="Reymonds">Reymonds</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

        
      
        </div>

        <!-- Forth Row -->
        <div class="row">
          <div class="col-md-3 mb-1 mr-2">
            <mat-form-field appearance="outline">
              <mat-label>Image:</mat-label>
              <div class="input-container">
                <input matInput placeholder="Choose file" [value]="selectedFileName" #fileInputField readonly>
                <input #fileInput type="file" formControlName="image" (change)="onFileSelected($event)" style="display: none;">
                <button mat-icon-button (click)="openFileInput()" tabindex="-1">
                  <mat-icon>attach_file</mat-icon>
                </button>
              </div>
            </mat-form-field>
          </div>
          
          <div class="d-flex col-md-3 mb-1 mr-2" *ngIf="selectedImage">
            <span style="color:green">Preview:</span>
            <span><img [src]="selectedImage" alt="Selected Image" style="max-width: 100px; max-height: 100px;"></span>
          </div>
          
       </div>

       <!-- Fifth Row -->
        <div class="row">
            <div class="col-md-12 mb-1 mr-2 ">
              <angular-editor formControlName="richDescription" [config]="editorConfig"></angular-editor>
            </div>
        </div>
       
     </form> 
    </div>
    <button mat-mini-fab class="mx-4 my-2" color="warn" matTooltip="ADD New Product" (click)="saveProduct()">
      <mat-icon>save</mat-icon>
    </button>
    <button mat-mini-fab class="mx-4 my-2" color="warn" matTooltip="ADD New Product" (click)="closeDrawer()">
      <mat-icon>close</mat-icon>
    </button>
  </mat-drawer>

 


